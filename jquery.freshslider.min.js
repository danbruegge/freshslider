(function(d){d.fn.freshslider=function(D){var g,e=this,h=e.find(".slides-inner:first"),f=h.children(".slide-item"),m={0:0},n,b=0,p,q,r=[],a=d.extend({},{isActiveClass:"freshslider-active",animation:!1,fadingSpeed:400,timeout:8E3,autoSlide:!1,cycle:!1,navType:["arrows"],navContainer:e,history:window.history,historyOn:!0,historyParam:"slide",firstSlide:function(){return!0},lastSlide:function(){return!0},ready:function(){return!0}},D),z=function(){if(b===f.length-1)if(a.cycle)b=0,x(m[0]),w();else return clearTimeout(n), !0;else y(),k(a.navType[0])&&(s(void 0),t(void 0));n=window.setTimeout(z,a.timeout)},u=function(){a.autoSlide&&(clearTimeout(n),n=window.setTimeout(z,a.timeout))},A=function(){var a=e.width();f.width(a);e.children(".slides").css("width",a);h.css({width:a*f.length,"margin-left":-(a*b)});for(g=1;g<f.length;g++)m[g]=d(f[g]).width()+m[g-1]},y=function(){var c=f.length-1;b+1<=c?(b+=1,b===c&&"function"===typeof a.lastSlide&&a.lastSlide()):b=a.cycle?0:c;v()},v=function(){x(-m[b]);var c=d(f[b]),l=a.history; if(B()){var C=r[b];c.data("title")&&(document.title=c.data("title")+e.data("title-template"));l.pushState({slide:C},document.title,["?",a.historyParam,"=",C].join(""))}h.children(".slide-item.active").removeClass("active");c.addClass("active");w()},x=function(c){a.animation?h.stop(!0,!0).animate({marginLeft:c},a.fadingSpeed,a.animation):h.css("marginLeft",c)},s=function(){0>=b&&!a.cycle?e.addClass("nav-prev-hidden"):e.removeClass("nav-prev-hidden")},t=function(){b>=f.length-1&&!a.cycle?e.addClass("nav-next-hidden"): e.removeClass("nav-next-hidden")},k=function(c){return-1<a.navType.indexOf(c)?!0:!1},B=function(){var c="function"===typeof d.url;return a.historyOn&&a.history.enabled&&c?!0:!1},w=function(){if(k(a.navType[1])){var c=a.navContainer.find(".bullet");c.removeClass("active");d(c[b]).addClass("active")}},E=function(){if(k(a.navType[0])){q=d('<ul class="slider-nav arrows"/>');var c=[];d.each(["prev","next"],function(a,b){c.push(d("<li/>").append(d("<a/>",{"class":"arrow "+b,title:"Slide to "+b,text:b})))}); a.navContainer.remove(".slider-nav.arrows").append(q.append(c));var l=q.find(".prev"),e=q.find(".next");s(l);t(e);l.on("click",function(){0<=b-1?(b-=1,0===b&&"function"===typeof a.firstSlide&&a.firstSlide()):b=a.cycle?f.length-1:0;v();k(a.navType[0])&&(s(l),t(e));u();return!1});e.on("click",function(){y();k(a.navType[0])&&(s(l),t(e));u();return!1})}},F=function(){k(a.navType[1])&&(p=d('<ol class="slider-nav bullets"/>'),d.each(f,function(b){var e="Slide "+(b+1);d("<li />").append(d("<a/>",{"class":"bullet", title:e,text:e,href:"?"+a.historyParam+"="+(b+1)})).appendTo(p)}),p.on("click","a.bullet",function(a){a.preventDefault();b=d(this).parent().index();v();u();return!1}),p.appendTo(e.find(".slider-nav-wrapper:first")),w())};(function(){e.addClass(a.isActiveClass);A();if(B()){var c=d.url().param(a.historyParam);f.each(function(a){d(f[a]).data("id")?r.push(d(f[a]).data("id")):r.push(""+(a+1))});c&&(b=parseInt(r.indexOf(c),10));if(b>f.length-1||0>=b)b=0;v()}else d(f[b]).addClass("active");"string"===typeof a.navType&& (a.navType=[a.navType]);E();F();h.parent().css({height:"auto",overflow:"visible"});d(window).resize(function(){A()});u();f.ready(function(){"function"===typeof a.ready&&a.ready()})})()}})(jQuery);
