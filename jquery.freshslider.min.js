(function(c){c.fn.freshslider=function(E){var k,d=this,h=d.find(".slides-inner:first"),g=h.children(".slide-item"),e=g.length-1,n={0:0},p,b=0,q,r,s=[],a=c.extend({},{isActiveClass:"freshslider-active",animation:!1,fadingSpeed:400,timeout:8E3,autoSlide:!1,cycle:!1,navType:["arrows"],navContainer:d,history:window.history,historyOn:!0,historyParam:"slide",firstSlide:function(){return!0},lastSlide:function(){return!0},ready:function(){return!0}},E),A=function(){if(b===e)if(a.cycle)b=0,y(n[0]),x();else return clearTimeout(p), !0;else z(),l(a.navType[0])&&(t(void 0),u(void 0));p=window.setTimeout(A,a.timeout)},v=function(){a.autoSlide&&(clearTimeout(p),p=window.setTimeout(A,a.timeout))},B=function(){var a=d.width();g.width(a);d.children(".slides").css("width",a);h.css({width:a*(e+1),"margin-left":-(a*b)});for(k=1;k<=e;k++)n[k]=c(g[k]).width()+n[k-1]},z=function(){b+1<=e?(b+=1,b===e&&"function"===typeof a.lastSlide&&a.lastSlide()):b=a.cycle?0:e;w()},w=function(){y(-n[b]);var f=c(g[b]),m=a.history;if(C()){var D=s[b],e=f.data(); e.title&&(document.title=e.title+d.data("title-template"));m.pushState({slide:D},document.title,["?",a.historyParam,"=",D].join(""))}h.children(".slide-item.active").removeClass("active");f.addClass("active");x()},y=function(b){a.animation?h.stop(!0,!0).animate({marginLeft:b},a.fadingSpeed,a.animation):h.css("marginLeft",b)},t=function(){0>=b&&!a.cycle?d.addClass("nav-prev-hidden"):d.removeClass("nav-prev-hidden")},u=function(){b>=e&&!a.cycle?d.addClass("nav-next-hidden"):d.removeClass("nav-next-hidden")}, l=function(b){return-1<a.navType.indexOf(b)?!0:!1},C=function(){var b="function"===typeof c.url;return a.historyOn&&a.history.enabled&&b?!0:!1},x=function(){if(l(a.navType[1])){var f=a.navContainer.find(".bullet");f.removeClass("active");c(f[b]).addClass("active")}},F=function(){if(l(a.navType[0])){r=c('<ul class="slider-nav arrows"/>');var f=[];c.each(["prev","next"],function(a,b){f.push(c("<li/>").append(c("<a/>",{"class":"arrow "+b,title:"Slide to "+b,text:b})))});a.navContainer.remove(".slider-nav.arrows").append(r.append(f)); var m=r.find(".prev"),d=r.find(".next");t(m);u(d);m.on("click",function(){0<=b-1?(b-=1,0===b&&"function"===typeof a.firstSlide&&a.firstSlide()):b=a.cycle?e:0;w();l(a.navType[0])&&(t(m),u(d));v();return!1});d.on("click",function(){z();l(a.navType[0])&&(t(m),u(d));v();return!1})}},G=function(){l(a.navType[1])&&(q=c('<ol class="slider-nav bullets"/>'),c.each(g,function(b){var d="Slide "+(b+1);c("<li />").append(c("<a/>",{"class":"bullet",title:d,text:d,href:"?"+a.historyParam+"="+(b+1)})).appendTo(q)}), q.on("click","a.bullet",function(a){a.preventDefault();b=c(this).parent().index();w();v();return!1}),q.appendTo(d.find(".slider-nav-wrapper:first")),x())};(function(){d.addClass(a.isActiveClass);B();if(C()){var f=c.url().param(a.historyParam);g.each(function(a){var b=c(g[a]).data();b.id?s.push(b.id):s.push(""+(a+1))});f&&(b=parseInt(s.indexOf(f),10));if(b>e||0>=b)b=0;w()}else c(g[b]).addClass("active");"string"===typeof a.navType&&(a.navType=[a.navType]);F();G();h.parent().css({height:"auto",overflow:"visible"}); c(window).resize(function(){B()});v();h.on("ready",g,function(){"function"===typeof a.ready&&a.ready()})})()}})(jQuery);
