(function(d){d.fn.freshslider=function(E){var g,e=this,h=e.find(".slides-inner:first"),f=h.children(".slide-item"),l={0:0},m=["arrows","bullets"],n,b=0,p,q,r=[],a=d.extend({},{isActiveClass:"freshslider-active",animation:!1,fadingSpeed:400,timeout:8E3,autoSlide:!1,cycle:!1,navType:[m[0]],navContainer:e,history:window.history,historyOn:!0,historyParam:"slide",firstSlide:function(){return!0},lastSlide:function(){return!0},ready:function(){return!0}},E),A=function(){if(b===f.length-1)if(a.cycle)b=0, y(l[0]),x();else return clearTimeout(n),!0;else z(),s()&&(t(void 0),u(void 0));n=window.setTimeout(A,a.timeout)},v=function(){a.autoSlide&&(clearTimeout(n),n=window.setTimeout(A,a.timeout))},B=function(){var a=e.width();f.width(a);e.children(".slides").css("width",a);h.css({width:a*f.length,"margin-left":-(a*b)});for(g=1;g<f.length;g++)l[g]=d(f[g]).width()+l[g-1]},z=function(){var c=f.length-1;b+1<=c?(b+=1,b===c&&"function"===typeof a.lastSlide&&a.lastSlide()):b=a.cycle?0:c;w()},w=function(){y(-l[b]); var c=d(f[b]),k=a.history;if(C()){var D=r[b];c.data("title")&&(document.title=c.data("title")+e.data("title-template"));k.pushState({slide:D},document.title,["?",a.historyParam,"=",D].join(""))}h.children(".slide-item.active").removeClass("active");c.addClass("active");x()},y=function(c){a.animation?h.stop(!0,!0).animate({marginLeft:c},a.fadingSpeed,a.animation):h.css("marginLeft",c)},t=function(){0>=b&&!a.cycle?e.addClass("nav-prev-hidden"):e.removeClass("nav-prev-hidden")},u=function(){b>=f.length- 1&&!a.cycle?e.addClass("nav-next-hidden"):e.removeClass("nav-next-hidden")},s=function(){return-1<a.navType.indexOf(m[0])?!0:!1},C=function(){var c="function"===typeof d.url;return a.historyOn&&a.history.enabled&&c?!0:!1},x=function(){if(-1<a.navType.indexOf(m[1])){var c=a.navContainer.find(".bullet");c.removeClass("active");d(c[b]).addClass("active")}},F=function(){if(s()){q=d('<ul class="slider-nav arrows"/>');var c=[];d.each(["prev","next"],function(a,b){c.push(d("<li/>").append(d("<a/>",{"class":"arrow "+ b,title:"Slide to "+b,text:b})))});a.navContainer.remove(".slider-nav.arrows").append(q.append(c));var k=q.find(".prev"),e=q.find(".next");t(k);u(e);k.on("click",function(){0<=b-1?(b-=1,0===b&&"function"===typeof a.firstSlide&&a.firstSlide()):b=a.cycle?f.length-1:0;w();s()&&(t(k),u(e));v();return!1});e.on("click",function(){z();s()&&(t(k),u(e));v();return!1})}},G=function(){-1<a.navType.indexOf(m[1])&&(p=d('<ol class="slider-nav bullets"/>'),d.each(f,function(b){var e="Slide "+(b+1);d("<li />").append(d("<a/>", {"class":"bullet",title:e,text:e,href:"?"+a.historyParam+"="+(b+1)})).appendTo(p)}),p.on("click","a.bullet",function(a){a.preventDefault();b=d(this).parent().index();w();v();return!1}),p.appendTo(e.find(".slider-nav-wrapper:first")),x())};(function(){e.addClass(a.isActiveClass);B();if(C()){var c=d.url().param(a.historyParam);f.each(function(a){d(f[a]).data("id")?r.push(d(f[a]).data("id")):r.push(""+(a+1))});c&&(b=parseInt(r.indexOf(c),10));if(b>f.length-1||0>=b)b=0;w()}else d(f[b]).addClass("active"); "string"===typeof a.navType&&(a.navType=[a.navType]);F();G();h.parent().css({height:"auto",overflow:"visible"});d(window).resize(function(){B()});v();f.ready(function(){"function"===typeof a.ready&&a.ready()})})()}})(jQuery);
