(function(d){d.fn.freshslider=function(g){var h,f=this,j=f.find(".slides-inner:first"),e=j.children(".slide-item"),l={"0":0},k=["arrows","bullets","both"],m,c=0,w,n=[],b=d.extend({},{isActiveClass:"freshslider-active",animation:!1,fadingSpeed:400,timeout:8E3,autoSlide:!1,cycle:!1,navType:k[0],navContainer:f,history:window.history,historyOn:!0,historyParam:"slide",firstSlide:function(){return!0},lastSlide:function(){return!0},ready:function(){return!0}},g),A=function(){if(c===e.length-1)if(b.cycle)c= 0,y(l[0]),x();else return clearTimeout(m),!0;else z(),p()&&(q(void 0),r(void 0));m=window.setTimeout(A,b.timeout)},s=function(){b.autoSlide&&(clearTimeout(m),m=window.setTimeout(A,b.timeout))},B=function(){var a=f.width();e.width(a);f.children(".slides").css("width",a);j.css({width:a*e.length,"margin-left":-(a*c)});for(h=1;h<e.length;h++)l[h]=d(e[h]).width()+l[h-1]},z=function(){var a=e.length-1;c+1<=a?(c+=1,c===a&&"function"===typeof b.lastSlide&&b.lastSlide()):c=b.cycle?0:a;t()},t=function(){y(-l[c]); var a=d(e[c]),g=b.history;if(C()){var h=n[c];a.data("title")&&(document.title=a.data("title")+f.data("title-template"));g.pushState({slide:h},document.title,["?",b.historyParam,"=",h].join(""))}j.children(".slide-item.active").removeClass("active");a.addClass("active");x()},y=function(a){b.animation?j.stop(!0,!0).animate({marginLeft:a},b.fadingSpeed,b.animation):j.css("marginLeft",a)},q=function(){0>=c&&!b.cycle?f.addClass("nav-prev-hidden"):f.removeClass("nav-prev-hidden")},r=function(){c>=e.length- 1&&!b.cycle?f.addClass("nav-next-hidden"):f.removeClass("nav-next-hidden")},p=function(){var a=b.navType;return a===k[0]||a===k[2]?!0:!1},D=function(){var a=b.navType;return a===k[1]||a===k[2]?!0:!1},C=function(){var a="function"===typeof d.url;return b.historyOn&&b.history.enabled&&a?!0:!1},x=function(){if(D()){var a=b.navContainer.find(".bullet");a.removeClass("active");d(a[c]).addClass("active")}};f.addClass(b.isActiveClass);B();if(C()){g=d.url().param(b.historyParam);e.each(function(a){d(e[a]).data("id")? n.push(d(e[a]).data("id")):n.push(""+(a+1))});g&&(c=parseInt(n.indexOf(g),10));if(c>e.length-1||0>=c)c=0;t()}else d(e[c]).addClass("active");if(p()){g=d('<ul class="slider-nav arrows"/>');var E=[];d.each(["prev","next"],function(a,b){E.push(d("<li/>").append(d("<a/>",{"class":"arrow "+b,title:"Slide to "+b,text:b})))});b.navContainer.remove(".slider-nav.arrows");b.navContainer.append(g.append(E));var u=g.find(".prev"),v=g.find(".next");q(u);r(v);u.on("click",function(){0<=c-1?(c-=1,0===c&&"function"=== typeof b.firstSlide&&b.firstSlide()):c=b.cycle?e.length-1:0;t();p()&&(q(u),r(v));s();return!1});v.on("click",function(){z();p()&&(q(u),r(v));s();return!1})}D()&&(w=d('<ol class="slider-nav bullets"/>'),d.each(e,function(a){var e="Slide "+(a+1);a=d("<li />").append(d("<a/>",{"class":"bullet",title:e,text:e,href:"?"+b.historyParam+"="+(a+1)}));a.on("click","a",function(){c=d(this).parent().index();t();s();return!1});a.appendTo(w)}),w.appendTo(f.find(".slider-nav-wrapper:first")),x());j.parent().css("height", "auto");d(window).resize(function(){B()});s();e.ready(function(){"function"===typeof b.ready&&b.ready()})}})(jQuery);
