(function(d){d.fn.freshslider=function(D){var g,e=this,h=e.find(".slides-inner:first"),f=h.children(".slide-item"),m={0:0},n,b=0,p,q,r=[],c=d.extend({},{isActiveClass:"freshslider-active",animation:!1,fadingSpeed:400,timeout:8E3,autoSlide:!1,cycle:!1,navType:["arrows"],navContainer:e,history:window.history,historyOn:!0,historyParam:"slide",firstSlide:function(){return!0},lastSlide:function(){return!0},ready:function(){return!0}},D),z=function(){if(b===f.length-1)if(c.cycle)b=0,x(m[0]),w();else return clearTimeout(n), !0;else y(),k("arrows")&&(s(void 0),t(void 0));n=window.setTimeout(z,c.timeout)},u=function(){c.autoSlide&&(clearTimeout(n),n=window.setTimeout(z,c.timeout))},A=function(){var a=e.width();f.width(a);e.children(".slides").css("width",a);h.css({width:a*f.length,"margin-left":-(a*b)});for(g=1;g<f.length;g++)m[g]=d(f[g]).width()+m[g-1]},y=function(){var a=f.length-1;b+1<=a?(b+=1,b===a&&"function"===typeof c.lastSlide&&c.lastSlide()):b=c.cycle?0:a;v()},v=function(){x(-m[b]);var a=d(f[b]),l=c.history;if(B()){var C= r[b];a.data("title")&&(document.title=a.data("title")+e.data("title-template"));l.pushState({slide:C},document.title,["?",c.historyParam,"=",C].join(""))}h.children(".slide-item.active").removeClass("active");a.addClass("active");w()},x=function(a){c.animation?h.stop(!0,!0).animate({marginLeft:a},c.fadingSpeed,c.animation):h.css("marginLeft",a)},s=function(){0>=b&&!c.cycle?e.addClass("nav-prev-hidden"):e.removeClass("nav-prev-hidden")},t=function(){b>=f.length-1&&!c.cycle?e.addClass("nav-next-hidden"): e.removeClass("nav-next-hidden")},k=function(a){return-1<c.navType.indexOf(a)?!0:!1},B=function(){var a="function"===typeof d.url;return c.historyOn&&c.history.enabled&&a?!0:!1},w=function(){if(k("bullets")){var a=c.navContainer.find(".bullet");a.removeClass("active");d(a[b]).addClass("active")}},E=function(){if(k("arrows")){q=d('<ul class="slider-nav arrows"/>');var a=[];d.each(["prev","next"],function(c,b){a.push(d("<li/>").append(d("<a/>",{"class":"arrow "+b,title:"Slide to "+b,text:b})))});c.navContainer.remove(".slider-nav.arrows").append(q.append(a)); var l=q.find(".prev"),e=q.find(".next");s(l);t(e);l.on("click",function(){0<=b-1?(b-=1,0===b&&"function"===typeof c.firstSlide&&c.firstSlide()):b=c.cycle?f.length-1:0;v();k("arrows")&&(s(l),t(e));u();return!1});e.on("click",function(){y();k("arrows")&&(s(l),t(e));u();return!1})}},F=function(){k("bullets")&&(p=d('<ol class="slider-nav bullets"/>'),d.each(f,function(a){var b="Slide "+(a+1);d("<li />").append(d("<a/>",{"class":"bullet",title:b,text:b,href:"?"+c.historyParam+"="+(a+1)})).appendTo(p)}), p.on("click","a.bullet",function(a){a.preventDefault();b=d(this).parent().index();v();u();return!1}),p.appendTo(e.find(".slider-nav-wrapper:first")),w())};(function(){e.addClass(c.isActiveClass);A();if(B()){var a=d.url().param(c.historyParam);f.each(function(a){d(f[a]).data("id")?r.push(d(f[a]).data("id")):r.push(""+(a+1))});a&&(b=parseInt(r.indexOf(a),10));if(b>f.length-1||0>=b)b=0;v()}else d(f[b]).addClass("active");"string"===typeof c.navType&&(c.navType=[c.navType]);E();F();h.parent().css({height:"auto", overflow:"visible"});d(window).resize(function(){A()});u();f.ready(function(){"function"===typeof c.ready&&c.ready()})})()}})(jQuery);
