(function(d){d.fn.freshslider=function(E){var e,f=this,l=f.find(".slides-inner:first"),c=l.children(".slide-item"),m={0:0},g=["arrows","bullets","both"],n,a=0,p,q,r=[],b=d.extend({},{isActiveClass:"freshslider-active",animation:!1,fadingSpeed:400,timeout:8E3,autoSlide:!1,cycle:!1,navType:g[0],navContainer:f,history:window.history,historyOn:!0,historyParam:"slide",firstSlide:function(){return!0},lastSlide:function(){return!0},ready:function(){return!0}},E),A=function(){if(a===c.length-1)if(b.cycle)a= 0,y(m[0]),x();else return clearTimeout(n),!0;else z(),s()&&(t(void 0),u(void 0));n=window.setTimeout(A,b.timeout)},v=function(){b.autoSlide&&(clearTimeout(n),n=window.setTimeout(A,b.timeout))},B=function(){var b=f.width();c.width(b);f.children(".slides").css("width",b);l.css({width:b*c.length,"margin-left":-(b*a)});for(e=1;e<c.length;e++)m[e]=d(c[e]).width()+m[e-1]},z=function(){var h=c.length-1;a+1<=h?(a+=1,a===h&&"function"===typeof b.lastSlide&&b.lastSlide()):a=b.cycle?0:h;w()},w=function(){y(-m[a]); var h=d(c[a]),e=b.history;if(C()){var k=r[a];h.data("title")&&(document.title=h.data("title")+f.data("title-template"));e.pushState({slide:k},document.title,["?",b.historyParam,"=",k].join(""))}l.children(".slide-item.active").removeClass("active");h.addClass("active");x()},y=function(a){b.animation?l.stop(!0,!0).animate({marginLeft:a},b.fadingSpeed,b.animation):l.css("marginLeft",a)},t=function(){0>=a&&!b.cycle?f.addClass("nav-prev-hidden"):f.removeClass("nav-prev-hidden")},u=function(){a>=c.length- 1&&!b.cycle?f.addClass("nav-next-hidden"):f.removeClass("nav-next-hidden")},s=function(){var a=b.navType;return a===g[0]||a===g[2]?!0:!1},D=function(){var a=b.navType;return a===g[1]||a===g[2]?!0:!1},C=function(){var a="function"===typeof d.url;return b.historyOn&&b.history.enabled&&a?!0:!1},x=function(){if(D()){var c=b.navContainer.find(".bullet");c.removeClass("active");d(c[a]).addClass("active")}};(function(){f.addClass(b.isActiveClass);B();if(C()){var h=d.url().param(b.historyParam);c.each(function(a){d(c[a]).data("id")? r.push(d(c[a]).data("id")):r.push(""+(a+1))});h&&(a=parseInt(r.indexOf(h),10));if(a>c.length-1||0>=a)a=0;w()}else d(c[a]).addClass("active");if(s()){q=d('<ul class="slider-nav arrows"/>');var e=[];d.each(["prev","next"],function(a,b){e.push(d("<li/>").append(d("<a/>",{"class":"arrow "+b,title:"Slide to "+b,text:b})))});b.navContainer.remove(".slider-nav.arrows");b.navContainer.append(q.append(e));var k=q.find(".prev"),g=q.find(".next");t(k);u(g);k.on("click",function(){0<=a-1?(a-=1,0===a&&"function"=== typeof b.firstSlide&&b.firstSlide()):a=b.cycle?c.length-1:0;w();s()&&(t(k),u(g));v();return!1});g.on("click",function(){z();s()&&(t(k),u(g));v();return!1})}D()&&(p=d('<ol class="slider-nav bullets"/>'),d.each(c,function(a){var c="Slide "+(a+1);d("<li />").append(d("<a/>",{"class":"bullet",title:c,text:c,href:"?"+b.historyParam+"="+(a+1)})).appendTo(p)}),p.on("click","a.bullet",function(b){b.preventDefault();a=d(this).parent().index();w();v();return!1}),p.appendTo(f.find(".slider-nav-wrapper:first")), x());l.parent().css("height","auto");d(window).resize(function(){B()});v();c.ready(function(){"function"===typeof b.ready&&b.ready()})})()}})(jQuery);
